<div class="row">
  <div class="btn-group">
    <button type="button" class="btn btn-success" (click)="isGroupsScheduleCollapsed = !isGroupsScheduleCollapsed"
            [attr.aria-expanded]="!isGroupsScheduleCollapsed" aria-controls="groups">Groups
    </button>
    <button type="button" class="btn btn-success"
            (click)="isProfessorsScheduleCollapsed = !isProfessorsScheduleCollapsed"
            [attr.aria-expanded]="!isProfessorsScheduleCollapsed" aria-controls="professors">Professors
    </button>
  </div>
</div>

<br/>

<div [collapse]="isGroupsScheduleCollapsed" class="card card-block card-header">

  <accordion [closeOthers]="true" *ngFor="let group of tableModel.groups">
    <accordion-group heading="Group Id: {{group.groupId}}">
      <table class="table table-hover" id="table">
        <thead>
        <tr>
          <th>Lesson name</th>
          <th>Professor name</th>
          <th>Begin</th>
          <th>End</th>
          <th>Room</th>
          <th>Day</th>
        </tr>
        </thead>

        <tbody id="tableBody"
               *ngFor="let lesson of tableModel.lessons | filterLessonsByGroup: group">
        <tr>
          <td>{{ lesson.lessonInfo.lessonName }}</td>
          <td>{{ lesson.professor.account.firstName }} {{ lesson.professor.account.lastName }}</td>
          <td>{{ lesson.lessonTime.begin | date:'HH:mm' }}</td>
          <td>{{ lesson.lessonTime.end | date:'HH:mm' }}</td>
          <td>{{ lesson.lessonRoom }}</td>
          <td>{{ lesson.day.dayName }}</td>
          <td>
            <button type="button" class="btn btn-danger" (click)="deleteLesson(lesson)">
              Delete
            </button>
          </td>
          <td>
            <button type="button" class="btn btn-secondary" (click)="openModal(lessonModal, lesson)">Edit</button>
          </td>
        </tr>
        </tbody>
      </table>
      <!--<pagination-controls id="groups" (pageChange)="page = $event" align="center"></pagination-controls>
-->
    </accordion-group>
  </accordion>
</div>
<br/>
<br/>
<div [collapse]="isProfessorsScheduleCollapsed" class="card card-block card-header">
  <h1>Professors</h1>
</div>


<!-- Modal -->
<ng-template #lessonModal>
  <div class="modal-header">
    <h4 class="modal-title pull-left">{{editMode ? "Edit": "Create"}} new Professor UserAccount</h4>
    <button type="button" class="close pull-right"
            aria-label="Close" (click)="closeModal()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="form-group">
      <label>Lesson</label>
      <select class="form-control" [(ngModel)]="lessonInfoId">
        <option *ngFor="let lessonInfo of tableModel.lessonInfos" [value]="lessonInfo.lessonInfoId">{{lessonInfo.lessonName}}
        </option>
      </select>
    </div>

    <div class="form-group">
      <label>Professor</label>
      <select class="form-control" [(ngModel)]="professorId">
        <option *ngFor="let professor of tableModel.professors" [value]="professor.professorId">{{professor.account.lastName}} {{professor.account.firstName}}
        </option>
      </select>
    </div>

    <div class="form-group">
      <label>Time</label>
      <select class="form-control" [(ngModel)]="timeId">
        <option *ngFor="let time of tableModel.lessonTimes" [value]="time.id">{{time.begin | date:'HH:mm'}} - {{time.end | date:'HH:mm'}}
        </option>
      </select>
    </div>

    <div class="form-group">
      <label>Room</label>
      <input class="form-control" name="grade" [(ngModel)]="editableLesson.lessonRoom" #room="ngModel"
             placeholder="Room" required
             pattern="[0-9]{1,}"/>
      <div [hidden]="editableLesson.lessonRoom" class="alert alert-danger">
        Please set valid Room
      </div>
    </div>

    <div class="form-group">
      <label>Day</label>
      <select class="form-control" [(ngModel)]="dayId">
        <option *ngFor="let day of tableModel.studyDays" [value]="day.dayNumber">{{day.dayName}}
        </option>
      </select>
    </div>

  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-default"
            [disabled]="room.invalid">
      {{editMode ? "Save": "Create"}}
    </button>
    <button type="button" class="btn btn-secondary" data-dismiss="modal" (click)="closeModal()">Close</button>
  </div>
</ng-template>
